# GLiNER PII Large v1.0 Model Configuration
# âœ… Fully integrated with custom GLiNERDetector adapter
# Advanced multilingual PII detection supporting 17 entity types

# Enable or disable this model
enabled = true

# Hugging Face model identifier
model_id = "knowledgator/gliner-pii-large-v1.0"

# Human-readable description
description = "GLiNER PII large v1.0 - Advanced multilingual PII detection supporting 17 entity types"

# Priority (3 = tertiary priority)
priority = 3

# Device allocation: "cpu", "cuda", or "mps"
device = "cpu"

# Maximum token length for model context window (GLiNER actual limit: 768 tokens)
# Using 720 tokens to leave margin for special tokens, with 100 tokens overlap (13.9%)
max_length = 720

# Model-specific confidence threshold (optimized for GLiNER)
threshold = 0.9

# Download settings for this model
[download]
# Uncomment to specify custom cache directory
# cache_dir = "/path/to/cache"
force_download = false
resume_download = true

# Custom filenames for GLiNER model (uses gliner_config.json instead of config.json)
[download.custom_filenames]
"config.json" = "gliner_config.json"

# PII type mapping - Maps GLiNER labels to piiranha-v1 standard types
# GLiNER uses natural language labels, mapped here to normalized PII types
[pii_type_mapping]
"account number" = "ACCOUNTNUM"
"building number" = "BUILDINGNUM"
"city" = "CITY"
"credit card number" = "CREDITCARDNUMBER"
"date of birth" = "DATEOFBIRTH"
"driver license number" = "DRIVERLICENSENUM"
"email" = "EMAIL"
"first name" = "GIVENNAME"
"ID card number" = "IDCARDNUM"
"password" = "PASSWORD"
"social security number" = "SOCIALNUM"
"street" = "STREET"
"last name" = "SURNAME"
"tax number" = "TAXNUM"
"phone number" = "TELEPHONENUM"
"username" = "USERNAME"
"zip code" = "ZIPCODE"

# Per-entity-type confidence thresholds (post-filter)
# These thresholds are applied AFTER GLiNER detection to filter out low-confidence results
# Entities below these thresholds are discarded to minimize false positives
# Based on Perplexity recommendations for GLiNER PII model reliability
[scoring]
# High variability / High false positive risk (0.7-0.9)
GIVENNAME = 0.75           # Names can be ambiguous
SURNAME = 0.75             # Last names can be ambiguous
USERNAME = 0.75            # Usernames lack standardization
EMAIL = 0.80               # Variable formats
PASSWORD = 0.85            # No standardization, high overlap with other text

# Very high false positive risk for phone numbers in documents with many numbers
TELEPHONENUM = 0.80        # Increased to 0.95 to avoid detecting dates/amounts/codes as phones

# Medium risk / Structured formats (0.5-0.7)
ACCOUNTNUM = 0.55          # Structured but variable
CREDITCARDNUMBER = 0.55    # Standardized format
DATEOFBIRTH = 0.55         # Standard formats
DRIVERLICENSENUM = 0.55    # Standardized per country
IDCARDNUM = 0.55           # Standardized per country
SOCIALNUM = 0.55           # Standardized format (SSN, etc.)
TAXNUM = 0.55              # Standardized per country
STREET = 0.65              # Addresses can be ambiguous

# Low risk / Well-structured (0.3-0.5)
BUILDINGNUM = 0.35         # Simple numeric patterns
CITY = 0.35                # Location names
ZIPCODE = 0.35             # Highly standardized format
